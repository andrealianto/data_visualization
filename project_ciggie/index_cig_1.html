<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Project Ciggie</title>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <link href="main.css" rel="stylesheet" type="text/css">
    </head>

    <body>
        <div class ="frame">
            <div class="header">
                <h2 id="article-headline">Cigarette Regulations in Asia, Country by Country</h2>
                <p id="article-description">
                    Updated 19 March 2017
                    <br>
                    <br>
                    Source: <a href="http://www.tobaccocontrollaws.org/legislation/">Tobacco Control Laws</a>
                </p>
            </div>

            <div class="main-content">
                <div id="button-row-wrapper">
                    <div class="button-row-top">
                        <button class="button-top button-top-active" id="button-advertising">Advertising</button>
                        <button class="button-top" id="button-posdisplay">Point-of-sale Display</button>
                        <button class="button-top" id="button-packaging">Packaging</button>
                        <button class="button-top" id="button-smokingbans">Smoking Bans</button>
                        <button class="button-top" id="button-ecig">E-cigarettes</button>
                    </div>

                    <div id="button-row-bottom-wrapper">
                        <div class="button-row-bottom-active" id="button-row-bottom-advertising">
                            <button class="button-bottom-active" id="button-overall-ads">Overall</button>
                            <button class id="button-media">Media</button>
                            <button class id="button-outdoor">Outdoor</button>
                            <button class id="button-sponsorship">Sponsorship</button>
                            <button class id="button-pos">Point-of-sale</button>
                            <button class id="button-freesample">Free Sample</button>
                        </div>

                        <div id="button-row-bottom-posdisplay">
                            <button class id="button-overall-posdisplay">Overall</button>
                            <button class id="button-posban">POS Display Ban</button>
                            <button class id="button-restrictedarea">Restricted POS Area</button>
                            <button class id="button-onepack">One Pack Per Brand</button>
                        </div>

                        <div id="button-row-bottom-packaging">
                            <button class id="button-overall-packaging">Overall</button>
                            <button class id="button-plain">Plain Packaging</button>
                            <button class id="button-pictwarning">Pictorial Warning</button>
                            <button class id="button-packsize">Pack Size Restriction</button>
                        </div>

                        <div id="button-row-bottom-smokingbans">
                            <button class id="button-overall-smokingbans">Overall</button>
                            <button class id="button-bars">Bars/Restaurants</button>
                            <button class id="button-office">Offices</button>
                            <button class id="button-publictransport">Public Transport</button>
                            <button class id="button-school">Schools</button>
                            <button class id="button-hospital">Hospitals</button>
                            <button class id="button-indoor">Indoor Public Area</button>
                        </div>

                        <div id="button-row-bottom-ecig">
                            <button class id="button-overall-ecig">Overall</button>
                            <button class id="button-import">Import</button>
                            <button class id="button-sales">Sales</button>
                            <button class id="button-possession">Possession</button>
                        </div>

                        <div id="button-row-bottom-mask"></div>
                    </div>

                </div>

                <div class="interactive-content">
                    <div id="asia-map"></div>

                    <div id="overview-wrapper">
                        <div id="overview-country-name">Indonesia</div>
                        <div id="overview-toughness-score">
                            <p>TOUGHNESS SCORE</p>
                            <p id="toughness-score">35%</p>
                            <p id="toughness-score-desc">For cigarette advertising</p>
                        </div>

                        <div class="overview-block-active" id="overview-block-advertising">
                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-media-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Media: </div>
                                    <div class="overview-topic-desc" id="overview-media-desc"> Allowed</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-outdoor-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Outdoor: </div>
                                    <div class="overview-topic-desc" id="overview-outdoor-desc"> Allowed</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-sponsorship-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Sponsorship: </div>
                                    <div class="overview-topic-desc" id="overview-sponsorship-desc">Allowed</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-pos-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Point-of-sale: </div>
                                    <div class="overview-topic-desc" id="overview-pos-desc">Allowed</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-freesample-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Free sample: </div>
                                    <div class="overview-topic-desc" id="overview-freesample-desc">Allowed</div>
                                </div>
                            </div>
                        </div>

                        <div id="overview-block-posdisplay">
                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-posban-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">POS Display Ban: </div>
                                    <div class="overview-topic-desc" id="overview-posban-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-restrictedarea-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Restricted POS Area: </div>
                                    <div class="overview-topic-desc" id="overview-restrictedarea-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-onepack-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">One Pack Per Brand: </div>
                                    <div class="overview-topic-desc" id="overview-onepack-desc"> No</div>
                                </div>
                            </div>
                        </div>

                        <div id="overview-block-packaging">
                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-plain-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Plain Packaging: </div>
                                    <div class="overview-topic-desc" id="overview-plain-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-pictwarning-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Pictorial Warning: </div>
                                    <div class="overview-topic-desc" id="overview-pictwarning-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-packsize-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Pack Size Restriction: </div>
                                    <div class="overview-topic-desc" id="overview-packsize-desc"> No</div>
                                </div>
                            </div>
                        </div>

                        <div id="overview-block-smokingbans">
                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-bars-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Bars/Restaurants: </div>
                                    <div class="overview-topic-desc" id="overview-bars-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-office-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Offices: </div>
                                    <div class="overview-topic-desc" id="overview-office-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-publictransport-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Public Transport: </div>
                                    <div class="overview-topic-desc" id="overview-publictransport-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-school-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Schools: </div>
                                    <div class="overview-topic-desc" id="overview-school-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-hospital-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Hospitals: </div>
                                    <div class="overview-topic-desc" id="overview-hospital-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-indoor-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Indoor Public Area: </div>
                                    <div class="overview-topic-desc" id="overview-indoor-desc"> No</div>
                                </div>
                            </div>
                        </div>

                        <div id="overview-block-ecig">
                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-ecig-import-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Import: </div>
                                    <div class="overview-topic-desc" id="overview-ecig-import-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-ecig-sales-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Sales: </div>
                                    <div class="overview-topic-desc" id="overview-ecig-sales-desc"> No</div>
                                </div>
                            </div>

                            <div class="overview-topic-row">
                                <div class="overview-topic-bullet" id="overview-ecig-possession-bullet"></div>
                                <div class="overview-info">
                                    <div class="overview-topic">Possession: </div>
                                    <div class="overview-topic-desc" id="overview-ecig-possession-desc"> No</div>
                                </div>
                            </div>
                        </div>

                        <div id="overview-block-mask"></div>

                    </div>
                </div>

            </div>

            <div class="footer">&copy; 2017 Andrea Lianto. All rights reserved.</div>
        </div>

        <script type="text/javascript">

            // draw map
            function draw(geo_data){
                var margin = 15,
                    width = 720 - margin,
                    height = 400 - margin;

                var svg = d3.select("#asia-map")
                    .append("svg")
                    .attr("width", width + margin)
                    .attr("height", height + margin)
                    .append('g')
                    .attr('class', 'map');

                var projection = d3.geo.mercator()
                                       .center([87,29])
                                       .scale(550)
                                       .translate([0,0])

                var path = d3.geo.path().projection(projection);

                var map = svg.selectAll('path')
                             .data(geo_data.features)
                             .enter()
                             .append('path')
                             .attr("id", function(d) {return d.properties.brk_name;})
                             .attr('d', path)
                             .on('click', select_country)
                             .style('fill', 'white')
                             .style('stroke', 'black')
                             .style('stroke-width', 0.5);

                // Pre-select Indonesia at the start
                d3.select('#Indonesia').classed('selected', true);

                function select_country(){
                    d3.select('.selected').classed('selected', false);
                    d3.select(this).classed('selected', true);
                    d3.select('#overview-country-name').text(this.id);

                    var selected_category = d3.select('.button-top-active').text();
                    update_toughness_score(this.id, selected_category);

                }
            }

            function load(data) {
                "use strict";

                var button_top = d3.selectAll(".button-top")

                button_top.on("click", function() {
                    d3.select('.button-top-active').classed('button-top-active', false);
                    d3.select(this).classed('button-top-active', true);

                    update_display(this.id);

                })

                // Update button-row-bottom and overview-block when top buttons are clicked
                function update_display(button_id){
                    d3.select('.button-row-bottom-active').classed('button-row-bottom-active', false);
                    d3.select('.overview-block-active').classed('overview-block-active', false);

                    switch(button_id) {

                        case "button-advertising":
                            d3.select('#button-row-bottom-advertising')
                                .classed('button-row-bottom-active', true);

                            d3.select('#overview-block-advertising')
                                .classed('overview-block-active', true);

                            d3.select('#toughness-score-desc')
                                .text('For cigarette advertising');

                            break;

                        case "button-posdisplay":
                            d3.select('#button-row-bottom-posdisplay')
                                .classed('button-row-bottom-active', true);

                            d3.select('#overview-block-posdisplay')
                                .classed('overview-block-active', true);

                            d3.select('#toughness-score-desc')
                                .text('For point-of-sale cigarette display');

                            break;

                        case "button-packaging":
                            d3.select('#button-row-bottom-packaging')
                                .classed('button-row-bottom-active', true);

                            d3.select('#overview-block-packaging')
                                .classed('overview-block-active', true);

                            d3.select('#toughness-score-desc')
                                .text('For cigarette packaging');

                            break;

                        case "button-smokingbans":
                            d3.select('#button-row-bottom-smokingbans')
                                .classed('button-row-bottom-active', true);

                            d3.select('#overview-block-smokingbans')
                                .classed('overview-block-active', true);

                            d3.select('#toughness-score-desc')
                                .text('For smoking bans');

                            break;

                        case "button-ecig":
                            d3.select('#button-row-bottom-ecig')
                                .classed('button-row-bottom-active', true);

                            d3.select('#overview-block-ecig')
                                .classed('overview-block-active', true);

                            d3.select('#toughness-score-desc')
                                .text('For e-cigarettes');

                            break;
                    }
                }






            }




            // Use D3 to load GeoJSON data for Asia
            d3.json("asean.json", draw);

            // Use D3 to load csv data
            d3.csv("cig_regulation_asia.csv", load);

        </script>

    </body>

</html>